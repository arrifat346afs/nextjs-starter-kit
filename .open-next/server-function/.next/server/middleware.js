(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[751],{477:()=>{},3033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a={};r.r(a),r.d(a,{config:()=>p,default:()=>f});var i=r(6214),n=r(9503),d=r(1733),o=r(6554),s=r(894),u=r(9670);let c=r(1414).dp,l=(0,d.u)(["/dashboard(.*)"]),f=(0,o.G)(async(e,t)=>{let r=await (await e()).getToken({template:"convex"}),{hasActiveSubscription:a}=await (0,s.pg)(c.subscriptions.getUserSubscriptionStatus,{},{token:r});if(t.nextUrl.href.includes("/dashboard")&&!a){let e=new URL("/pricing",t.nextUrl.origin);return u.Rp.redirect(e)}l(t)&&await e.protect()}),p={matcher:["/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)","/(api|trpc)(.*)"]};r(6199);let w={...a},h=w.middleware||w.default,m="/middleware";if("function"!=typeof h)throw Object.defineProperty(Error(`The Middleware "${m}" must export a \`middleware\` or a \`default\` function`),"__NEXT_ERROR_CODE",{value:"E120",enumerable:!1,configurable:!0});function E(e){return(0,n.O)({...e,page:m,handler:async(...e)=>{try{return await h(...e)}catch(n){let t=e[0],r=new URL(t.url),a=r.pathname+r.search;throw await (0,i.Ek)(n,{path:a,method:t.method,headers:Object.fromEntries(t.headers.entries())},{routerKind:"Pages Router",routePath:"/middleware",routeType:"middleware",revalidateReason:void 0}),n}}})}},5356:e=>{"use strict";e.exports=require("node:buffer")},5521:e=>{"use strict";e.exports=require("node:async_hooks")}},e=>{var t=t=>e(e.s=t);e.O(0,[363],()=>t(3033));var r=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES).middleware_middleware=r}]);
//# sourceMappingURL=middleware.js.map